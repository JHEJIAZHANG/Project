<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>正在返回 LINE…</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{display:flex;flex-direction:column;align-items:center;justify-content:center;
         height:100vh;font-family:sans-serif}
  </style>
</head>
<body>
  <h2>✅ 已完成 Google 授權</h2>
  <p>系統正返回 LINE…</p>
  <a id="back" href="#">若未自動跳轉，請點此</a>

  <script>
    const qs = new URLSearchParams(location.search);
    const liffId = qs.get('liff_id');
    const status = qs.get('status') || 'success';

    const lineDeepLink = `line://app/${liffId}?status=${status}`;

    // 1. 自動跳回 LINE
    location.href = lineDeepLink;

    // 2. 1 秒後嘗試關閉分頁（部份瀏覽器可能被攔）
    setTimeout(() => window.close(), 1000);

    // 3. 提供手動點擊備援
    document.getElementById('back').href = lineDeepLink;
  </script>
</body>
</html>
